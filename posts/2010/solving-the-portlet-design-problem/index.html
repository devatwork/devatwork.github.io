<!DOCTYPE html><html lang="en"><head><!-- Meta--><meta charset="utf-8"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Solving the Portlet Design Problem | Dev @ Work</title><meta name="description" content="A day in the life of a developer"><meta name="keywords" content="Trilobyte, Bert Willems, Dev @ Work, dev at work, Bert, Willems, developer, software, programmer, lead developer, architect, JavaScript, dotNET, liferay, liones"><meta name="author" content="Bert Willems"><meta name="generator" content="DocPad v6.64.0" /><meta name="viewport" content="width=device-width"><!-- Icons--><link rel="shortcut icon" href="/ico/favicon.gif"><!--[if lt IE 9]><script async src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]--><!-- Styles--><link  rel="stylesheet" href="/vendor/prettify.css" /><link  rel="stylesheet" href="/vendor/components-bootstrap/css/bootstrap.css" /><link  rel="stylesheet" href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" /><link  rel="stylesheet" href="//fonts.googleapis.com/css?family=Lato:300,400,400italic|Open+Sans+Condensed:300,700" /><link  rel="stylesheet" href="/styles/style.css" /><!-- RSS--><link rel="alternate" type="application/rss+xml" title="Post RSS feed - Dev@Work" href="/rss.xml"></head><body><div class="container"><div class="row top"><div class="col-lg-8 col-md-8 col-sm-7 col-left"><div class="brand"><a href="/">Dev @ Work.nl</a></div></div><div class="col-lg-4 col-md-4 col-sm-5 col-right"><nav><ul class="list-inline"><li><a href="/pages/posts">Blog</a></li><li><a href="/pages/projects">Projects</a></li><li><a href="/pages/presentations">Presentations</a></li><li><a href="/pages/about">About</a></li><li class="social"><a href="https://www.facebook.com/devatwork" title="facebook"><i class="fa fa-facebook-square"></i></a><a href="https://github.com/devatwork" title="github"><i class="fa fa-github-square"></i></a><a href="https://plus.google.com/111880992300867132101/" title="google plus"><i class="fa fa-google-plus-square"></i></a><a href="http://nl.linkedin.com/in/trilobyte" title="linkedin"><i class="fa fa-linkedin-square"></i></a><a href="https://twitter.com/devatwork" title="twitter"><i class="fa fa-twitter-square"></i></a></li></ul></nav></div></div><div class="row bottom"><div class="col-lg-8 col-md-8 col-sm-7 col-left"><section class="content"><article id="post" class="post"><hgroup><h1>Solving the Portlet Design Problem</h1><h2>Wed Dec 22 2010</h2><h3><span class="tag">liferay</span><span class="tag">liones</span></h3></hgroup><div class="post-content"><p>In my <a title="Building Kluwer Support Portal – a Developers Perspective" href="/posts/2010/building-kluwer-support-portal">previous post</a> I told you about the problem we encountered while implementing the <a title="Kluwer Support" href="http://support.kluwer.nl/" target="_blank">Kluwer Support</a> portal in <a title="Enterprise open source portal and collaboration software - Liferay.com" href="http://www.liferay.com/" target="_blank">Liferay</a>. In this post I will explain the solution we came up with.</p><p>But first lets have a quick look at the problem again: We needed to support different styles per portlet and ‘read more’ links which needed to work for both custom and out-of-the-box potlets. Let have a look at some of the different ‘web-content display portlet’ styles used in the portal:</p><table><tbody><tr><td><img class="size-full wp-image-836" style="width: 172px; height: 120px;" title="web content display portlet 1" src="http://www.devatwork.nl/wp-content/uploads/2010/12/web-content-display-portlet-1.png" alt="" width="206" height="142" /></td><td><img class="size-full wp-image-837" style="width: 172px; height: 120px;" title="web content display portlet 2" src="http://www.devatwork.nl/wp-content/uploads/2010/12/web-content-display-portlet-2.png" alt="" width="244" height="144" /></td><td><img class="size-full wp-image-838" style="width: 172px; height: 120px;" title="web content display portlet 3" src="http://www.devatwork.nl/wp-content/uploads/2010/12/web-content-display-portlet-3.png" alt="" width="211" height="246" /></td></tr></tbody></table><p>Liferay, at least not version 5.2.8 EE, does not support these requirements out of the box (Not entirely true: Liferay does allow you to specify custom CSS rules per portlet instance, but you would need a front-end specialist to maintain the website which IMHO is not acceptable).</p><p>To make it even more difficult we were not allowed to use Liferay Ext or place many hooks or have impact on existing communities in the portal instance.</p><p>The solution that we came up with was to use an JSP hook to replace Liferays ‘look and feel’ page. We wrote some code which would add a new tab displaying theme specific properties to the page if the theme had a specific setting specifying the path to a velocity template which in turn would render the theme specific settings.</p><p>Some of the settings we included are:</p><ul><li>Custom CSS classes</li><li>Display mode</li><li>Read more link URL &amp; label</li></ul><p>However, we can easily add more, or less, properties depending on the requirements without having to touch the implementation code or break the theme for Kluwer Support.</p><p>Next we implemented a servlet which handles the storage of our custom properties. The servlet simple updates the portlet preferences with the custom properties. The properties are read by the theme and used to determine how to render the portlet.</p><p>We all implemented this in a separate deployment package except for the mentioned velocity template which resided in the theme package. By doing this, we solved the problem not only for this project but for upcoming projects as well: We will just implement a theme and the velocity template containing the custom properties for that particular project! I am willing to share some code, let met know if you want it.</p><p>I am very curious about the way you would have solved this problem and what you think of this solution so please write a comment.</p></div></article><div class="social-buttons"><div class="twitter-tweet-button service-button">
	<a href="https://twitter.com/share" class="twitter-share-button" data-via="devatwork" data-related="devatwork">Tweet</a>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div><div class="google-plus-one-button service-button">
	<div class="g-plusone" data-size="medium" data-href="http%3A//devatwork.nl/posts/2010/solving-the-portlet-design-problem"></div>
	<script>
		(function() {
			var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
			po.src = 'https://apis.google.com/js/plusone.js';
			var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
		})();
	</script>
</div><div class="reddit-submit-button service-button">
	<script type="text/javascript" src="http://en.reddit.com/static/button/button1.js"></script>
</div><div class="twitter-follow-button service-button">
	<a href="https://twitter.com/devatwork" class="twitter-follow-button" data-show-count="false">Follow @devatwork</a>
	<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script>
</div><div class="github-follow-button service-button">
	<iframe src="//ghbtns.com/github-btn.html?user=devatwork&amp;type=follow&amp;count=true" allowtransparency="true" frameborder="0" scrolling="0" width="165" height="20"></iframe>
</div></div><div class="navlinks">
  <a href="/posts/2010/building-kluwer-support-portal" title="Previous Post: Building Kluwer Support Portal - a Developers Perspective" class="navlinks-prev">&laquo; Building Kluwer Support Portal - a Developers Perspective</a>
  <a href="/posts/2011/software-complexity" title="Next Post: Software Complexity – Decomposing an Application" class="navlinks-next">Software Complexity – Decomposing an Application &raquo;</a>
</div><footer></footer></section></div><div class="col-lg-4 col-md-4 col-sm-5 col-right"><section class="sidebar"><div class="panel panel-primary"><div class="panel-heading">Recent posts</div><ul class="list-group"><li class="list-group-item"><a href="/posts/2014/bye-old-stack-hello-new-stack">Bye old stack, hello 2014 stack</a></li><li class="list-group-item"><a href="/posts/2011/software-complexity">Software Complexity – Decomposing an Application</a></li><li class="list-group-item"><a href="/posts/2010/solving-the-portlet-design-problem">Solving the Portlet Design Problem</a></li><li class="list-group-item"><a href="/posts/2010/building-kluwer-support-portal">Building Kluwer Support Portal - a Developers Perspective</a></li><li class="list-group-item"><a href="/posts/2009/improve-your-site-search-engine">Extending your Successful Website: Improve your Search Engine</a></li></ul><div class="panel-footer clearfix"><a href="/pages/posts" class="pull-right">All posts&nbsp;<i class="fa fa-chevron-right"></i></a></div></div><div class="panel panel-primary"><div class="panel-heading">All projects</div><ul class="list-group"><li class="list-group-item"><a href="/projects/grunt-gluejs2">grunt-gluejs2</a></li><li class="list-group-item"><a href="/projects/inversejs">inverse.js</a></li></ul></div></section></div></div></div><!-- Scripts--><script >(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
})(window,document,'script','//www.google-analytics.com/analytics.js','ga');
ga('create', 'UA-4409537-1');
ga('send', 'pageview');</script><script defer="defer"  src="/vendor/prettify.js"></script><script defer="defer"  src="/vendor/jquery/jquery.js"></script><script defer="defer"  src="/vendor/components-bootstrap/js/bootstrap.js"></script><script defer="defer"  src="/vendor/log.js"></script><script defer="defer"  src="/vendor/modernizr.js"></script><script defer="defer"  src="/scripts/script.js"></script></body></html>